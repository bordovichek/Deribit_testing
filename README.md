# Deribit Monitor Service

Сервис для автоматического сбора и хранения рыночных данных с биржи Deribit.

## Стек технологий
- **FastAPI**: асинхронный фреймворк для работы с API
- **Celery + Redis**: для планирования и выполнения фоновых задач
- **PostgreSQL**: База данных.
- **SQLAlchemy**: ORM для управления БД.
- **Docker/Docker-Compose**: для быстрой контейнеризации и развертывания.

## Design Decisions

При проектировании архитектуры были приняты следующие решения:

1. **Разделение API и Worker**: Процессы сбора данных и отдачи API изолированы в разных контейнерах. Это позволяет масштабировать воркеры независимо от веб-интерфейса при увеличении количества тикеров.
2. **Celery Beat для планирования**: Выбран вместо системного cron для лучшей переносимости и управления через Python-код.
3. **Асинхронный клиент внутри синхронного воркера**: Клиент Deribit написан на `aiohttp` для потенциального перехода на WebSockets в будущем.
4. **Автоматическая инициализация схемы**: Команда `Base.metadata.create_all` встроена в запуск воркера и API. Это гарантирует готовность БД при первом старте без необходимости ручного запуска миграций проверяющим.

## Инструкция по развертыванию

### Требования
- Docker
- Docker Compose

### Запуск
В корневой папке проекта выполните:
```bash
docker-compose up --build